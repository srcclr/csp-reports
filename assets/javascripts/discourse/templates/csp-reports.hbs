<div class="container">
  <h3 class="mb">CSP Reports</h3>

  <div class="mb">
    <label class="inline-block">Your report-uri URL:</label>
    {{textfield-readonly value=model.reportUri class="control--text inline-block w--50 mb- text--center"}}
  </div>

  <div class="mb">
    {{#if addMode}}
      {{partial "add-domain-form"}}
    {{else}}
      {{d-button action="addDomain" icon="plus" label="csp_reports.add_domain" class="btn--primary"}}
    {{/if}}
  </div>

  <table class="domains-list-table">
    <thead>
      <tr>
        <th>Domain Name</th>
        <th>Domain URL</th>
        <th>Notifications</th>
        <th></th>
      </tr>
    </thead>

    {{#each domain in model.domains itemController="domain"}}
      <tr>
        <td>
          {{#link-to 'domain' domain.model.id}}{{domain.model.name}}{{/link-to}}
        </td>
        <td>
          <a href="{{domain.model.url}}" target="_blank">{{domain.model.url}}</a>
        </td>
        <td>
          <button {{action "setNotificationType" "never"}} {{bind-attr class=":btn--xs domain.model.isNever:btn--default:btn"}}>Never</button>
          <button {{action "setNotificationType" "daily"}} {{bind-attr class=":btn--xs domain.model.isDaily:btn--default:btn"}}>Daily</button>
          <button {{action "setNotificationType" "weekly"}} {{bind-attr class=":btn--xs domain.model.isWeekly:btn--default:btn"}}>Weekly</button>
          <button {{action "setNotificationType" "monthly"}} {{bind-attr class=":btn--xs domain.model.isMonthly:btn--default:btn"}}>Monthly</button>
        </td>
        <td>
          {{d-button action="destroy" icon="trash-o"}}
        </td>
      </tr>
    {{/each}}
  </table>

  {{#if model.friend_domains}}
    <p class="mt"><strong>Shared domains:</strong></p>

    {{#each domain in model.friend_domains itemController="domain"}}
      <p class="pb--">
        {{#link-to 'domain' domain.model.id}}{{domain.model.name}} ({{domain.model.url}}){{/link-to}}
      </p>
    {{/each}}
  {{/if}}
</div>
